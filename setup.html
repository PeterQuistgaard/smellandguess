<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex">
    <!--Bootstrap-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
    <title>Setup</title>
</head>

<body>
    <nav class="navbar navbar-expand-lg bg-dark " data-bs-theme="dark">
        <div class="container-md">
            <a class="navbar-brand" href="index.html">Smell and Guess</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup"
                aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
                <div class="navbar-nav">
                    <a class="nav-link" href="game.html">Start spillet</a>
                </div>
            </div>
        </div>
    </nav>
    <div class="container-md">


        <nav style="--bs-breadcrumb-divider: '>';" aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="index.html">Home</a></li>
                <li class="breadcrumb-item active" aria-current="page">Setup</li>
            </ol>
        </nav>


        <div class="row">
            <div class="col-md-12 ">
                <h2 class="mt-3">Setup</h2>
                <p>
                    Før man kan spille Smell and Guess, skal spillet have opsat spillere og lugte.
                </p>

                <h4>Spillere</h4>
                <p id="containerplayers"></p>
                <p>
                    Opret eller ret spillere med dette link <a href="setupplayers.html" target="_blank">Setup spillere</a>
                </p>


                <h4>Lugte</h4>
                <p id="containersmells"></p>
                <p>
                    <!-- WebApp skal vide hvilke lugte der skal være med i spillet.</br>
                                                Scan alle glas på billedet vha. dette link.</br> -->
                    Opret eller ret lugte med dette link <a href="setupsmells.html" target="_blank">Setup lugte</a>
                </p>


                <p>
                    Her er et billede af nogle glaskrukker med QR-koder. Det kan du anvende til at teste
                    WebApp'en, hvis du endnu ikke har et spil med glaskrupper.<br />
                    Skriv billedet ud eller brug en ekstra mobil/tablet.

                </p>
                <p>
                    <img class="img-fluid rounded" alt="Jars for test" src="/images/jarsfortest.jpeg">
                </p>


                



                <h3>Start spillet</h3>
                <p>
                    Når der er oprettet spillere og lugte i spillet kan det startes.</br>
                    Scan et af glassene når spillet er startet.</br>
                    <a href="game.html" target="_blank">Start spillet</a>
                </p>




            </div>







            <!-- <div class="mt-5 p-2 bg-dark text-white text-center">
        <p></p>
    </div> -->




            <script>




                document.addEventListener("DOMContentLoaded", async function () {
                    //Global variables


                    //references to UI elements
                    const containerplayers = document.getElementById("containerplayers");
                    const containersmells = document.getElementById("containersmells");

                    const userlanguage = document.getElementById("userlanguage");


                    function getPlayers() {
                        const value = localStorage.getItem("players") || initPlayers();
                        return JSON.parse(value);
                    }

                    function initPlayers() {
                        const defaultplayers = [];
                        setPlayers(defaultplayers);
                        return JSON.stringify(defaultplayers);
                    }

                    function getSmells() {
                        const value = localStorage.getItem("smells") || initSmells();
                        return JSON.parse(value);
                    }

                    function initSmells() {
                        return JSON.stringify([]);
                    }


                    function drawSmells2(smells) {

                        console.log(smells)                        

                        if (smells[0]) {
                            //så er mindst en smell oprettet
                            div = document.createElement("DIV");
                            div.innerText = "Disse lugte er oprettet i dette spil:"
                            containersmells.appendChild(div);
                            ul = document.createElement("UL");                           

                            smells.forEach((item) => {
                                li = document.createElement("LI");
                                li.innerHTML = item.name;
                                ul.appendChild(li);
                            });

                            containersmells.appendChild(ul);
                        }

                    }




                    function drawContainerPlayers(players) {
                        const fragment = document.createDocumentFragment();

                        if (players[0]) {
                            //så er mindst en spiller oprettet
                            div = document.createElement("DIV");
                            div.innerText = "Disse spiller er oprettet i dette spil:"
                            fragment.appendChild(div);

                            players.forEach((item) => {
                                div = document.createElement("DIV");
                                let img = document.createElement("IMG");
                                img.classList.add("mx-2");
                                img.style.width = "20px";
                                img.setAttribute("src", `/images/flagslanguage/${item.lang}.png`)
                                span = document.createElement("SPAN");
                                span.innerText = item.name;
                                div.append(span);
                                div.append(img)
                                fragment.appendChild(div);
                            }
                            );
                            containerplayers.innerHTML = "";
                            containerplayers.appendChild(fragment);

                        }



                    };


                    let players = getPlayers();
                    let smells = getSmells();


                    drawContainerPlayers(players);
                    drawSmells2(smells)




                });
            </script>



</body>

</html>